global:
  # output folder base path
  outdir : './'
  # pulse offset for the function generator. Leave to zero to get the maximum voltage swing -5 (baseline) to +5 (peak). 
  # Note that the output of the fanout board is AC coupled so the final baseline will be 0 V anyway
  pulse_offset : 0
  # pulse repetition frequency
  pulse_freq : 1113
  # local IP
  my_ip : "192.168.12.3"
  # module IP
  module_ip : "192.168.12.173"
  # TC def file
  tc_def : "/home/leonardo/Software/TARGET/TargetDriver/trunk/config/TC_ASIC.def"
  # T5TEA def file
  t5tea_def : "/home/leonardo/Software/TARGET/TargetDriver/trunk/config/T5TEA_ASIC.def"
  # FPGA def file
  #fpga_def : "/home/leonardo/Software/TARGET/firmware_smart/SCT_MSA_FPGA_Firmware0xC0000009.def"
  fpga_def : "/home/leonardo/Software/TARGET/firmware_smart/SCT_MSA_FPGA_Firmware0xC000000C.def"
  # Flag to enable SiPM features
  enable_sipm : True
  # Flag to enable SiPM features
  hv_enable : True

daq:
  # acquired waveform length, unit: blocks of 32 samples
  nblocks : 8
  # split ethernet data in this number of packets
  packets : 8
  # stepsize for PMTREF4 scan in trigger rate scan
  #trig_PMTREF4_stepsize : 10
  trig_PMTREF4_stepsize : 5
  # stepsize for THRESH scan in trigger rate scan
  #trig_THRESH_stepsize : 20
  trig_THRESH_stepsize : 5
  # trigger delay to get the pulse in the acquisition window
  #trig_del : 350
  trig_del : 450
  #trig_del : 10350

pedestal:
  # default vped to use
  default_vped : 1200
  # length is the duration of the acquisition in seconds
  #length : 120.0 
  length : 60.0 
  # outname is the output files/folder name
  outname : 'pedestal'
  #outname : 'pedestal_trigdel350'
  # triggertype 1  means external trigger, triggertype 2 means hardsync
  triggertype : 2
  # flag to enable a "fast mode" acquisition (default: false, not tested)
  fast_mode : False
   # min_badchannels_threshold_for_checkpoint: if the number of bad channels is higher than this, ask for confirmation to proceed (checkpoint)
  min_badchannels_threshold_for_checkpoint : 1 

signal:
  # length is the duration of the acquisition in seconds
  length : 10.0
  # outname is the output files/folder name
  #outname : 'signalHV33_DAC100'
  outname : 'signal'
  #outname : 'signal_laser'
  # pedname is the pedestal file to use
  pedname : 'pedestal'
  #pedname : 'pedestal_trigdel350'
  # pulse amplitude is the amplitude of the pulse for the signal in Volts, _at the function generator_
  # Note that the actual amplitude of the signal reaching the FEEM is about one order of magnitude smaller because the signal gets attenuated.
  pulse_amp : 1.0
  # triggertype 1 means external trigger, triggertype 2 means hardsync
  #triggertype : 2
  triggertype : 1
  # pmtref4 to be used for internal trigger
  pmtref4 : 2000
  # thresh to be used for internal trigger
  thresh : 2000
  # checkpoint: asks yes/no to continue with other steps if enough bad channels are found (the threshold is defined as "min_badchannels_threshold_for_checkpoint")
  checkpoint_enabled : 0
  # threshold for checkpoint
  min_badchannels_threshold_for_checkpoint : 1 
  # enable High Voltage
  hv_enable : True


linearity:
  # triggertype 1 means external trigger, triggertype 2 means hardsync
  triggertype : 1
  #triggertype : 2
  # pmtref4 to be used for internal trigger
  pmtref4 : 2000
  # thresh to be used for internal trigger
  thresh : 2000
  # length is the duration of the acquisition in seconds
  length : 10.0
  # outname is the output files/folder name
  outname : 'linearity'
  # pedname is the pedestal file to use
  pedname : 'pedestal'
  # signalvals meaning: starting amplitude, stopping amplitude, step, in Volts,  _at the function generator_
  # Note that the actual amplitude of the signal reaching the FEEM is about one order of magnitude smaller because the signal gets attenuated.
  signalvals : [0.5, 10.0, 0.5]
  # checkpoint: asks yes/no to continue with other steps if enough bad channels are found (the threshold is defined as "min_badchannels_threshold_for_checkpoint")
  checkpoint_enabled : 0
  # threshold for checkpoint
  min_badchannels_threshold_for_checkpoint : 1 
  # enable High Voltage
  hv_enable : True


vpedscan:
  # length is the duration of the acquisition in seconds
  length : 5.0
  # outname is the output files/folder name
  outname : 'vpedscan'
  # triggertype 1 means external trigger, triggertype 2 means hardsync
  triggertype : 2
  # signalvals meaning: starting amplitude, stopping amplitude, step
  vpedvals : [1000, 4100, 500]
  # checkpoint: asks yes/no to continue with other steps if enough bad channels are found (the threshold is defined as "min_badchannels_threshold_for_checkpoint")
  checkpoint_enabled : 0
  # threshold for checkpoint
  min_badchannels_threshold_for_checkpoint : 1 

trigscan_pmtref4:
  # gain settings for the trigger circuit
  gain : 21
  # output file name
  #outname : 'triggerscan'
  outname : 'triggerscan_HV35_DAC100_disable_ch'
  # pulse amplitude for pmtref4 in Volts, at the function generator
  pulse_amp_t_PMTREF4 : 0.3
  # default value for pmtref4 (not used for pmtref4 scan, actually it is a dummy value)
  pmtref4 : 1500
  # initial value for the PMTRef4 scan
  #pmtref4v_start : 0
  pmtref4v_start : 1800
  # initial value for the PMTRef4 scan
  pmtref4v_end : 4096
  # thresh value (constant) for the PMTRef4 scan
  thresh : 2000
  # CLARIFY------------------------------------------------------------------------------------------------------
  #triggerdelay : 500
  triggerdelay : 350
  # triggertype to use
  triggertype : 1
  # wbias parameter for the trigger circuit
  wbias : 985
  # use external trigger (set False if TBOB is not present and R148-R163 are mounted)
  exttrig : False
  # checkpoint: asks yes/no to continue with other steps if enough bad channels are found (the threshold is defined as "min_badchannels_threshold_for_checkpoint")
  checkpoint_enabled : 0
  # threshold for checkpoint
  min_badchannels_threshold_for_checkpoint : 1 

trigscan_thr:
  # gain settings for the trigger circuit
  gain : 21
  # output file name
  #outname : 'triggerscan'
  outname : 'triggerscan_HV35_DAC100_disable_ch'
  # pulse amplitude for thresh scan
  pulse_amp_t_THRESH : 0.05
  # default value for pmtref4 (may be overridden by a previous pmtref4 scan)
  pmtref4 : 1500
  # initial value for the thresh scan
  threshv_start : 0
  # final value for the thresh scan
  threshv_end : 2200
  #threshv_end : 4096
  # CLARIFY------------------------------------------------------------------------------------------------------
  #triggerdelay : 500
  triggerdelay : 350
  # triggertype to use
  triggertype : 1
  # wbias parameter for the trigger circuit
  wbias : 985
  # use external trigger (set False if TBOB is not present and R148-R163 are mounted)
  exttrig : False
  # checkpoint: asks yes/no to continue with other steps if enough bad channels are found (the threshold is defined as "min_badchannels_threshold_for_checkpoint")
  checkpoint_enabled : 0
  # threshold for checkpoint
  min_badchannels_threshold_for_checkpoint : 1 

smart:
  # disable channels (default is everything enabled)
  disable_channels : []
  # global registers
  globals : [16,5,40]
  # DACs for each channel (up to 64 values, or external file)  
  dacs : 100
  # global registers - loop
  #globals_loop : [[0,0,0],[0,0,63],[0,32,32],[0,32,63],[0,63,0],[0,63,32],[0,63,63],[16,5,40]]
  globals_loop : [[0,0,0],[0,0,32],[0,0,63],[0,32,0],[0,32,32],[0,32,63],[0,63,0],[0,63,32],[0,63,63],[16,5,40]]
  #globals_loop : [[16,0,0],[16,0,32],[16,0,63],[16,32,0],[16,32,32],[16,32,63]]
  #globals_loop : [[32,0,0],[32,0,32],[32,0,63],[32,32,0],[32,32,32],[32,32,63]]
  #globals_loop : [[0,0,0],[0,0,63]]
  # dac registers - loop
  #dacs_loop : [25,50,75,100,125,150,175,200,225,250]
  dacs_loop : [50,100]
  # flags to enable loop
  flag_dac_loop : False
  flag_globals_loop : True

smart_calib:
  outname : 'smartADC'
  # disable channels (default is everything enabled)
  disable_channels : []
  # global registers
  globals : [16,5,40]
  # DACs for each channel (up to 64 values, or external file)  
  dacs : 100
  # global registers - loop - NOT USED
  globals_loop : [[0,0,0],[0,0,32],[0,0,63],[0,32,0],[0,32,32],[0,32,63],[0,63,0],[0,63,32],[0,63,63]]
  # min_badchannels_threshold_for_checkpoint: if the number of bad channels is higher than this, ask for confirmation to proceed (checkpoint)
  min_badchannels_threshold_for_checkpoint : 1 

